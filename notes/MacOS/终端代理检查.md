
## 查询代理
``` bash
env | grep -i proxy
``` 

输出：（什么都没有），说明没有任何代理。

输出类似以下说明代理存在代理：
http_proxy=http://127.0.0.1:7890

https_proxy=http://127.0.0.1:7890

all_proxy=socks5://127.0.0.1:7890
``` bash

tanghao@tanghao-MacBook-Pro ~ % env | grep -i proxy

http_proxy=http://127.0.0.1:7890

https_proxy=http://127.0.0.1:7890

all_proxy=socks5://127.0.0.1:7890

tanghao@tanghao-MacBook-Pro ~ % curl -I https://ghcr.io

HTTP/1.1 200 Connection established

  

HTTP/2 405 

content-type: application/json

docker-distribution-api-version: registry/2.0

strict-transport-security: max-age=63072000; includeSubDomains; preload

date: Tue, 30 Dec 2025 06:29:16 GMT

content-length: 78

x-github-request-id: 9F55:314841:618209:14C5721:6953713B

  

tanghao@tanghao-MacBook-Pro ~ %
```

假设你的代理是 Clash（最常见）：

### 1️⃣ 临时生效（当前终端）

export http_proxy=http://127.0.0.1:7890 
export https_proxy=http://127.0.0.1:7890 
export all_proxy=socks5://127.0.0.1:7890`

> ⚠️ 端口请以你 Clash 实际端口为准  
> 常见：7890 / 7891 / 1080

### 2️⃣ 立刻验证 GHCR

`curl -I https://ghcr.io`

- **秒回 HTTP 200/401** → 代理生效
    
- **卡住 / timeout** → 节点不行（台湾节点常见）
    

---

### 3️⃣ 再跑 brew（强制 verbose）

brew upgrade --verbose