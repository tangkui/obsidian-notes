
``` bash
find . -type f -name '*.sql' | xargs grep -i 'PB0000020210118009'
``` 

| 阶段     | 命令段                    | 作用                                         | 关键选项 / 示例                                                                         | 备注 / 易错点            |     |
| ------ | ---------------------- | ------------------------------------------ | --------------------------------------------------------------------------------- | ------------------- | --- |
| ① 查找   | `find .`               | 从当前目录递归查找文件/目录                             | `.`：当前目录；可换成 `/data/sql` 等绝对路径                                                    | 路径含空格时需用引号          |     |
|        | `-type f`              | 仅匹配“普通文件”                                  | 其他：`-type d`（目录）、`-type l`（符号链接）                                                  | 与 `-type f` 互斥      |     |
|        | `-name '*.sql'`        | 文件名后缀为 `.sql`（大小写敏感）                       | 不区分大小写：`-iname '*.sql'`                                                           | 通配符必须用引号防止 shell 展开 |     |
|        | `-print0`              | 以 NUL 字符 `\0` 结尾输出记录                       | 与 xargs 的 `-0` 成对使用                                                               | 解决文件名含空格、特殊字符问题     |     |
| ② 管道   | \|                     | \`                                         | 把 find 的标准输出转到下一个命令的标准输入                                                          |                     |     |
| ③ 参数重组 | `xargs`                | 将 stdin 转成命令行参数，避免“Argument list too long” | 无选项：一次性追加全部文件                                                                     | 默认以空格/换行分隔          |     |
|        | `-0`                   | 以 NUL 作为分隔符                                | 与 `-print0` 对应：`xargs -0`                                                         | 防止空格/引号/反斜杠被误拆      |     |
|        | `-I {}`                | 指定占位符                                      | `xargs -I {} cp {} /backup/`                                                      | 每条命令只处理一个文件         |     |
|        | `-P N`                 | 并发 N 个进程                                   | `xargs -P 4`                                                                      | 提升在多核/SSD 场景下的速度    |     |
| ④ 搜索   | `grep`                 | 在文件内容中查找字符串                                | 无选项：区分大小写，显示匹配行                                                                   |                     |     |
|        | `-i`                   | 忽略大小写                                      | `grep -i 'pb000…'`                                                                |                     |     |
|        | `-n`                   | 输出行号                                       | `grep -n '…'`                                                                     | 方便定位                |     |
|        | `-H`                   | 始终显示文件名（默认已有）                              |                                                                                   |                     |     |
|        | `-l`                   | 仅列出“包含匹配”的文件名                              | `grep -l '…'`                                                                     | 不显示具体行              |     |
|        | `-L`                   | 仅列出“不包含匹配”的文件名                             | `grep -L '…'`                                                                     | 反向过滤                |     |
|        | `-R --include='*.sql'` | 直接递归 + 过滤后缀                                | `grep -R --include='*.sql' -i '…' .`                                              | 可取代 find+xargs      |     |
| ⑤ 完整示例 |                        |                                            | `find . -type f -name '*.sql' -print0 \| xargs -0 grep -inH 'PB0000020210118009'` | 兼容空格、并行安全、带行号       |     |
# 日志查询常用命令速查表

## 🔖 常用场景快速索引

- [实时查看日志](#%E5%AE%9E%E6%97%B6%E6%9F%A5%E7%9C%8B%E6%97%A5%E5%BF%97)
    
- [搜索关键字](#%E6%90%9C%E7%B4%A2%E5%85%B3%E9%94%AE%E5%AD%97)
    
- [显示上下文](#%E6%98%BE%E7%A4%BA%E4%B8%8A%E4%B8%8B%E6%96%87)
    
- [分页查看大日志](#%E5%88%86%E9%A1%B5%E6%9F%A5%E7%9C%8B%E5%A4%A7%E6%97%A5%E5%BF%97)
    
- [统计与过滤](#%E7%BB%9F%E8%AE%A1%E4%B8%8E%E8%BF%87%E6%BB%A4)
    
- [按时间过滤](#%E6%8C%89%E6%97%B6%E9%97%B4%E8%BF%87%E6%BB%A4)
    
- [JSON 日志处理](#json-%E6%97%A5%E5%BF%97%E5%A4%84%E7%90%86)
    

---

## 实时查看日志

|命令示例|说明|
|---|---|
|`tail -f spring_applog.log`|实时滚动日志|
|`tail -n 100 -f spring_applog.log`|从最后 100 行开始显示并跟随|

---

## 搜索关键字

|命令示例|说明|
|---|---|
|`grep "甘肃省" spring_applog.log`|搜索关键字|
|`grep --color=auto "甘肃省" spring_applog.log`|高亮关键字|
|`grep -i "error" spring_applog.log`|忽略大小写|
|`grep -n "甘肃省" spring_applog.log`|显示行号|

---

## 显示上下文

|命令示例|说明|
|---|---|
|`grep -C 3 "甘肃省" spring_applog.log`|匹配行 + 上下 3 行|
|`grep -B 5 "甘肃省" spring_applog.log`|匹配行 + 前 5 行|
|`grep -A 5 "甘肃省" spring_applog.log`|匹配行 + 后 5 行|

---

## 分页查看大日志

|命令示例|说明|
|---|---|
|`less spring_applog.log`|分页查看日志|
|`/甘肃省`|搜索关键字|
|`n` / `N`|下一个 / 上一个匹配|
|`q`|退出|

---

## 统计与过滤

|命令示例|说明|
|---|---|
|`grep -c "甘肃省" spring_applog.log`|统计出现次数|
|`grep "ERROR" spring_applog.log \| sort \| uniq -c \| sort -nr`|去重并统计频次|

---

## 按时间过滤

|命令示例|说明|
|---|---|
|`grep "2025-08-30" spring_applog.log`|搜索指定日期|
|`awk '/2025-08-30 10:00:00/,/2025-08-30 11:00:00/' spring_applog.log`|提取某时间段日志|

---

## JSON 日志处理

|命令示例|说明|
|---|---|
|`jq . spring_applog.json \| less`|格式化 JSON|
|`jq 'select(.message \| contains("甘肃省"))' spring_applog.json`|查询 message 包含“甘肃省”的日志|